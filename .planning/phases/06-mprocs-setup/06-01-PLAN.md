# Plan 06-01: Add mprocs to setup

## Goal

Add mprocs (terminal multiplexer for parallel processes) to the lazy-agent setup wizard and doctor verification, enabling the /fork skill to display multiple Claude instances side-by-side.

## Context

- **Phase**: 6 of 7 - Add mprocs to setup
- **Milestone**: v1.2 Fork Command
- **Requirements**: FORK-01, FORK-02
- **Pattern to follow**: Existing optional tools in setup.sh and doctor.sh

## Tasks

- [ ] Task 1: Add mprocs check to doctor.sh in Developer Tools section
- [ ] Task 2: Add PREV_MPROCS loading for existing config in setup.sh
- [ ] Task 3: Add mprocs prompt to setup.sh in Multi-Agent Tools section
- [ ] Task 4: Add mprocs to config generation in setup.sh
- [ ] Task 5: Add mprocs to config.example.json
- [ ] Task 6: Update time estimate logic in setup.sh for mprocs

## Files to Modify

| File | Action | Description |
|------|--------|-------------|
| `doctor.sh` | Modify | Add mprocs check in Developer Tools section |
| `setup.sh` | Modify | Add mprocs prompt and config generation |
| `config.example.json` | Modify | Add `mprocs: false` to optional_tools |

## Implementation Details

### doctor.sh Changes

Add after line 100 (after glow check):
```bash
check "mprocs" "mprocs" "brew install mprocs (optional)"
```

### setup.sh Changes

1. Add PREV_MPROCS loading (around line 46):
```bash
PREV_MPROCS=$(jq -r '.setup.optional_tools.mprocs // false' config.json)
```

2. Add prompt in Multi-Agent Tools section (around line 176):
```bash
echo -e "${DIM}~30 sec, terminal multiplexer for parallel Claude sessions${NC}"
INSTALL_MPROCS=$(confirm "mprocs? (run multiple processes side-by-side)" "$PREV_MPROCS")
```

3. Add to config generation (around line 208):
```bash
"mprocs": $INSTALL_MPROCS,
```

4. Add to time estimate (around line 239):
```bash
[ "$INSTALL_MPROCS" = "true" ] && TOTAL_TIME=$((TOTAL_TIME + 1))
```

### config.example.json Changes

Add to optional_tools:
```json
"mprocs": false
```

## Verification

- [ ] `doctor.sh` includes mprocs check with `brew install mprocs` hint
- [ ] `setup.sh` loads previous mprocs config value
- [ ] `setup.sh` prompts for mprocs in Multi-Agent Tools section
- [ ] `setup.sh` includes mprocs in generated config.json
- [ ] `config.example.json` includes `mprocs: false`
- [ ] Running `./doctor.sh` shows mprocs status correctly

---
*Plan created: 2026-01-15*
